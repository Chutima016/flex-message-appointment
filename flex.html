<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <title>Pharmacy SRTH Dev.</title>
  </head>
  <body>
    <script src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script> 
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

  <div class="alert alert-primary" role="alert">
  <center>Loading...</center>
</div>
    
    <script>
  window.onload = function(e) {
  liff.init({liffId:"2006673542-xB39Ejj1"}, function() {
    liff.ready.then(() => {
     if (liff.isLoggedIn()) {
       var link = getParameterByName("show");

              
       if(link == "appsheet"){
        var A = getParameterByName("A")//Ref.ID
        var B = getParameterByName("B")//สถานะ
        var C = getParameterByName("C")//นัดรับยา
        var D = getParameterByName("D")//ผู้แจ้ง
        var Msg = [
     
          {
  "type": "flex",
  "altText": "New Data Submitted",
  "contents":
          
          {
  "type": "bubble",
  "hero": {
    "type": "image",
    "url": "https://drive.google.com/uc?id=1I6V6ue0vp2AxK_54iHwt38guU9JmkEA8",
    "size": "full",
    "aspectRatio": "20:13",
    "aspectMode": "cover",
    "action": {
      "type": "uri",
      "uri": "https://line.me/"
    }
  },
  "body": {
    "type": "box",
    "layout": "vertical",
    "contents": [
      {
        "type": "text",
        "text": "แจ้งใบค้างยารายการใหม่",
        "weight": "bold",
        "size": "xl"
      },
      {
        "type": "box",
        "layout": "vertical",
        "margin": "lg",
        "spacing": "sm",
        "contents": [
          {
            "type": "box",
            "layout": "baseline",
            "spacing": "sm",
            "contents": [
              {
                "type": "text",
                "text": "Ref.ID",
                "size": "md",
                "flex": 2,
                "weight": "bold"
              },
              {
                "type": "text",
                "text": ""+A,
                "wrap": true,
                "color": "#666666",
                "size": "md",
                "flex": 5
              }
            ]
          },
          {
            "type": "box",
            "layout": "baseline",
            "spacing": "sm",
            "contents": [
              {
                "type": "text",
                "text": "สถานะ",
                "size": "md",
                "flex": 2,
                "weight": "bold"
              },
              {
                "type": "text",
                "text": ""+B,
                "wrap": true,
                "color": "#666666",
                "size": "md",
                "flex": 5
              }
            ]
          },
          {
            "type": "box",
            "layout": "baseline",
            "spacing": "sm",
            "contents": [
              {
                "type": "text",
                "text": "นัดรับยา",
                "size": "md",
                "flex": 2,
                "weight": "bold"
              },
              {
                "type": "text",
                "text": ""+C,
                "wrap": true,
                "color": "#666666",
                "size": "md",
                "flex": 5
              }
            ]
          },
          {
            "type": "box",
            "layout": "baseline",
            "contents": [
              {
                "type": "text",
                "text": "ผู้แจ้ง",
                "weight": "bold",
                "size": "md",
                "flex": 2
              },
              {
                "type": "text",
                "text": ""+D,
                "flex": 5,
                "size": "md",
                "color": "#666666",
                "wrap": true
              }
            ]
          }
        ]
      }
    ]
  },
  "footer": {
    "type": "box",
    "layout": "vertical",
    "spacing": "sm",
    "contents": [
      {
        "type": "button",
        "style": "link",
        "height": "sm",
        "action": {
          "type": "uri",
          "label": "คลิกดูรายละเอียด",
          "uri": "https://www.appsheet.com/start/a2d21f6d-c40a-4bf8-b623-0d41c056742e"
        }
      },
      {
        "type": "box",
        "layout": "vertical",
        "contents": [],
        "margin": "sm"
      }
    ],
    "flex": 0
  }
}
            
          }
       
        ]
        
        ShareTargetPicker(Msg)
        }

       
       
       if(link == "update"){
        var A = getParameterByName("A")//Ref.ID
        var B = getParameterByName("B")//สถานะ
        var C = getParameterByName("C")//จำนวนจ่ายในวันนัดรับยา
        var D = getParameterByName("D")//ผู้จ่ายยาในวันนัดรับยา
        var Msg = [
     
          {
  "type": "flex",
  "altText": "New Data Updated",
  "contents":
          
          {
  "type": "bubble",
  "hero": {
    "type": "image",
    "url": "https://drive.google.com/uc?id=1qH2q_OEE129ewksWpzKImBBa6JcgCn8y",
    "size": "full",
    "aspectRatio": "20:13",
    "aspectMode": "cover",
    "action": {
      "type": "uri",
      "uri": "https://line.me/"
    }
  },
  "body": {
    "type": "box",
    "layout": "vertical",
    "contents": [
      {
        "type": "text",
        "text": "แจ้งUpdateใบค้างยาเดิม",
        "weight": "bold",
        "size": "xl"
      },
      {
        "type": "box",
        "layout": "vertical",
        "margin": "lg",
        "spacing": "sm",
        "contents": [
          {
            "type": "box",
            "layout": "baseline",
            "spacing": "sm",
            "contents": [
              {
                "type": "text",
                "text": "Ref.ID",
                "size": "md",
                "flex": 2,
                "weight": "bold"
              },
              {
                "type": "text",
                "text": ""+A,
                "wrap": true,
                "color": "#666666",
                "size": "md",
                "flex": 5
              }
            ]
          },
          {
            "type": "box",
            "layout": "baseline",
            "spacing": "sm",
            "contents": [
              {
                "type": "text",
                "text": "สถานะ",
                "size": "md",
                "flex": 2,
                "weight": "bold"
              },
              {
                "type": "text",
                "text": ""+B,
                "wrap": true,
                "color": "#666666",
                "size": "md",
                "flex": 5
              }
            ]
          },
          {
            "type": "box",
            "layout": "baseline",
            "spacing": "sm",
            "contents": [
              {
                "type": "text",
                "text": "จ่ายแล้ว",
                "size": "md",
                "flex": 2,
                "weight": "bold"
              },
              {
                "type": "text",
                "text": ""+C,
                "wrap": true,
                "color": "#666666",
                "size": "md",
                "flex": 5
              }
            ]
          },
          {
            "type": "box",
            "layout": "baseline",
            "contents": [
              {
                "type": "text",
                "text": "ผู้จ่าย",
                "weight": "bold",
                "size": "md",
                "flex": 2
              },
              {
                "type": "text",
                "text": ""+D,
                "flex": 5,
                "size": "md",
                "color": "#666666",
                "wrap": true
              }
            ]
          }
        ]
      }
    ]
  },
  "footer": {
    "type": "box",
    "layout": "vertical",
    "spacing": "sm",
    "contents": [
      {
        "type": "button",
        "style": "link",
        "height": "sm",
        "action": {
          "type": "uri",
          "label": "คลิกดูรายละเอียด",
          "uri": "https://www.appsheet.com/start/1a3ec3c8-0b95-46f2-99a6-1eb8e4379e76"
        }
      },
      {
        "type": "box",
        "layout": "vertical",
        "contents": [],
        "margin": "sm"
      }
    ],
    "flex": 0
  }
}
            
          }
       
        ]
        
        ShareTargetPicker(Msg)
        }


       
       if(link == "verify"){
        var A = getParameterByName("A")//Ref.ID
        var B = getParameterByName("B")//สถานะ
        var C = getParameterByName("C")//นัดรับยา
        var D = getParameterByName("D")//Admin
        var Msg = [
     
          {
  "type": "flex",
  "altText": "New Data Verified",
  "contents":
          
          {
  "type": "bubble",
  "hero": {
    "type": "image",
    "url": "https://elitenp.com/wp-content/uploads/2021/08/about-health-medical-medicine-3887439-1024x682.jpg",
    "size": "full",
    "aspectRatio": "20:13",
    "aspectMode": "cover",
    "action": {
      "type": "uri",
      "uri": "https://line.me/"
    }
  },
  "body": {
    "type": "box",
    "layout": "vertical",
    "contents": [
      {
        "type": "text",
        "text": "แจ้งVerifyใบค้างยาใหม่",
        "weight": "bold",
        "size": "xl"
      },
      {
        "type": "box",
        "layout": "vertical",
        "margin": "lg",
        "spacing": "sm",
        "contents": [
          {
            "type": "box",
            "layout": "baseline",
            "spacing": "sm",
            "contents": [
              {
                "type": "text",
                "text": "Ref.ID",
                "size": "md",
                "flex": 2,
                "weight": "bold"
              },
              {
                "type": "text",
                "text": ""+A,
                "wrap": true,
                "color": "#666666",
                "size": "md",
                "flex": 5
              }
            ]
          },
          {
            "type": "box",
            "layout": "baseline",
            "spacing": "sm",
            "contents": [
              {
                "type": "text",
                "text": "สถานะ",
                "size": "md",
                "flex": 2,
                "weight": "bold"
              },
              {
                "type": "text",
                "text": ""+B,
                "wrap": true,
                "color": "#666666",
                "size": "md",
                "flex": 5
              }
            ]
          },
          {
            "type": "box",
            "layout": "baseline",
            "spacing": "sm",
            "contents": [
              {
                "type": "text",
                "text": "นัดรับยา",
                "size": "md",
                "flex": 2,
                "weight": "bold"
              },
              {
                "type": "text",
                "text": ""+C,
                "wrap": true,
                "color": "#666666",
                "size": "md",
                "flex": 5
              }
            ]
          },
          {
            "type": "box",
            "layout": "baseline",
            "contents": [
              {
                "type": "text",
                "text": "Admin",
                "weight": "bold",
                "size": "md",
                "flex": 2
              },
              {
                "type": "text",
                "text": ""+D,
                "flex": 5,
                "size": "md",
                "color": "#666666",
                "wrap": true
              }
            ]
          }
        ]
      }
    ]
  },
  "footer": {
    "type": "box",
    "layout": "vertical",
    "spacing": "sm",
    "contents": [
      {
        "type": "button",
        "style": "link",
        "height": "sm",
        "action": {
          "type": "uri",
          "label": "คลิกดูรายละเอียด",
          "uri": "https://www.appsheet.com/start/0e3258bf-383e-4dfa-9b88-f408b81b9140"
        }
      },
      {
        "type": "box",
        "layout": "vertical",
        "contents": [],
        "margin": "sm"
      }
    ],
    "flex": 0
  }
}
            
          }
       
        ]
        
        ShareTargetPicker(Msg)
        }

       
   } else {
        liff.login();
      }

  
    })
  });
    
    
      function ShareTargetPicker(flex){
 
   liff.shareTargetPicker(flex).then(function () {
            liff.closeWindow();
        });
   

      }
    
    function sendflex(flex){
        
    liff.sendMessages(flex).then(function() {
            liff.closeWindow();
          
        });
        
      }
    
    
    
      function getParameterByName(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, '\\$&');
    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, ' '));
}
  }
  

    </script>
    
  </body>
</html>



